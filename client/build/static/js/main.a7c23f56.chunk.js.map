{"version":3,"sources":["components/ScreenShare.js","components/FullScreen.js","components/VideoControl.js","components/AudioControl.js","components/HangUp.js","components/LandingHTML.js","components/IncomingCall.js","utils/tools.js","App.js","serviceWorker.js","index.js","Sounds/ringtone.mp3","Icons/share.svg","Icons/fullscreen.svg","Icons/minimize.svg","Icons/camera.svg","Icons/camera-stop.svg","Icons/microphone.svg","Icons/microphone-stop.svg","Icons/hang-up.svg"],"names":["ScreenShare","isMobileDevice","shareScreen","screenShare","className","onClick","src","share","alt","FullScreenBtn","isfullscreen","setFullscreen","minimize","fullscreen","VideoControl","videoMuted","toggleMuteVideo","camerastop","camera","AudioControl","audioMuted","toggleMuteAudio","microphonestop","microphone","HangUp","endCall","hangup","LandingHTML","copied","showCopiedMessage","yourID","receiverID","setReceiverID","callPeer","setCopied","type","placeholder","value","onChange","e","target","toLowerCase","trim","IncomingCall","receivingCall","callAccepted","callRejected","acceptCall","rejectCall","caller","name","a","check","navigator","userAgent","vendor","window","opera","test","substr","clipboard","writeText","setInterval","ringtoneSound","Howl","ringtone","loop","preload","App","UserVideo","PartnerVideo","useState","setYourID","users","setUsers","stream","setStream","setReceivingCall","setCaller","callingFriend","setCallingFriend","callerSignal","setCallerSignal","setCallAccepted","setCallRejected","modalVisible","setModalVisible","modalMessage","setModalMessage","setAudioMuted","setVideoMuted","userVideo","useRef","partnerVideo","socket","myPeer","current","destroy","emit","to","location","reload","useEffect","io","connect","on","id","data","play","from","signal","playsInline","muted","ref","autoPlay","style","display","mediaDevices","getUserMedia","video","audio","then","srcObject","peer","Peer","initiator","trickle","userToCall","signalData","err","catch","console","log","visible","onClose","width","height","measure","closeOnEsc","unload","fallback","getAudioTracks","enabled","getVideoTracks","getDisplayMedia","cursor","screenStream","replaceTrack","getTracks","onended","FullScreen","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","error","message","module","exports"],"mappings":"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","file":"static/js/main.a7c23f56.chunk.js","sourcesContent":["import React from \"react\";\nimport share from \"../Icons/share.svg\";\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.isMobileDevice\n * @param {Function} props.shareScreen\n */\nconst ScreenShare = ({ isMobileDevice, shareScreen }) => {\n  let screenShare = (\n    <span className=\"iconContainer\" onClick={() => shareScreen()}>\n      <img src={share} alt=\"Share screen\" />\n    </span>\n  );\n  if (isMobileDevice()) {\n    screenShare = <></>;\n  }\n  return screenShare;\n};\n\nexport default ScreenShare;\n","import React from \"react\";\nimport fullscreen from \"../Icons/fullscreen.svg\";\nimport minimize from \"../Icons/minimize.svg\";\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.isfullscreen \n * @param {Function} props.setFullscreen\n */\nconst FullScreenBtn = ({ isfullscreen, setFullscreen }) => {\n  let fullscreenButton;\n  if (isfullscreen) {\n    fullscreenButton = (\n      <span\n        className=\"iconContainer\"\n        onClick={() => {\n          setFullscreen(false);\n        }}\n      >\n        <img src={minimize} alt=\"fullscreen\" />\n      </span>\n    );\n  } else {\n    fullscreenButton = (\n      <span\n        className=\"iconContainer\"\n        onClick={() => {\n          setFullscreen(true);\n        }}\n      >\n        <img src={fullscreen} alt=\"fullscreen\" />\n      </span>\n    );\n  }\n  return fullscreenButton;\n};\n\nexport default FullScreenBtn;\n","import React from 'react';\nimport camera from \"../Icons/camera.svg\";\nimport camerastop from \"../Icons/camera-stop.svg\";\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.videoMuted\n * @param {Function} props.toggleMuteVideo\n */\nconst VideoControl = ({ videoMuted, toggleMuteVideo }) => {\n  let videoControl;\n  if (videoMuted) {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteVideo()}>\n        <img src={camerastop} alt=\"Resume video\" />\n      </span>\n    );\n  } else {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteVideo()}>\n        <img src={camera} alt=\"Stop audio\" />\n      </span>\n    );\n  };\n  return videoControl;\n};\n\nexport default VideoControl;\n","import React from 'react';\nimport microphone from \"../Icons/microphone.svg\";\nimport microphonestop from \"../Icons/microphone-stop.svg\";\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.audioMuted\n * @param {Function} props.toggleMuteAudio\n */\nconst AudioControl = ({ audioMuted, toggleMuteAudio }) => {\n  let audioControl;\n  if (audioMuted) {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteAudio()}>\n        <img src={microphonestop} alt=\"Unmute audio\" />\n      </span>\n    );\n  } else {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteAudio()}>\n        <img src={microphone} alt=\"Mute audio\" />\n      </span>\n    );\n  }\n  return audioControl;\n};\n\nexport default AudioControl;\n","import React from \"react\";\nimport hangup from \"../Icons/hang-up.svg\";\n\n/**\n *\n * @param {object} props\n * @param {Function} props.endCall\n */\nconst HangUp = ({ endCall }) => (\n  <span className=\"iconContainer\" onClick={() => endCall()}>\n    <img src={hangup} alt=\"End call\" />\n  </span>\n);\n\nexport default HangUp;\n","import React from \"react\";\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.copied\n * @param {Function} props.showCopiedMessage\n * @param {string} props.yourID\n * @param {string} props.receiverID\n * @param {Function} props.setReceiverID\n * @param {Function} props.callPeer\n * @param {Function} props.setCopied\n */\nconst LandingHTML = ({ copied, showCopiedMessage, yourID, receiverID, setReceiverID, callPeer, setCopied }) => (\n  <main>\n    <div className=\"u-margin-top-xxlarge u-margin-bottom-xxlarge\">\n      <div className=\"o-wrapper-l\">\n        <div className=\"hero flex flex-column\">\n          <div>\n            <div className=\"actionText\">\n              Send this Username to your friend,{\" \"}\n              <span\n                className={\n                  copied ? \"username highlight copied\" : \"username highlight\"\n                }\n                onClick={() => {\n                  showCopiedMessage(yourID, setCopied);\n                }}\n              >\n                {yourID}\n              </span>\n              ?\n            </div>\n          </div>\n          <div className=\"callBox flex\">\n            <input\n              type=\"text\"\n              placeholder=\"Friend ID\"\n              value={receiverID}\n              onChange={(e) => setReceiverID(e.target.value)}\n              className=\"form-input\"\n            />\n            <button\n              onClick={() => callPeer(receiverID.toLowerCase().trim())}\n              className=\"primaryButton\"\n            >\n              Call\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n);\n\nexport default LandingHTML;\n","import React from 'react';\n\n/**\n * \n * @param {object} props\n * @param {boolean} props.receivingCall\n * @param {boolean} props.callAccepted\n * @param {boolean} props.callRejected\n * @param {Function} props.acceptCall\n * @param {Function} props.rejectCall\n * @param {string} props.caller\n */\nconst IncomingCall = ({ receivingCall, callAccepted, callRejected, acceptCall, rejectCall, caller }) => {\n  if (receivingCall && !callAccepted && !callRejected) {\n    return (\n      <div className=\"incomingCallContainer\">\n        <div className=\"incomingCall flex flex-column\">\n          <div>\n            <span className=\"callerID\">{caller}</span> is calling you!\n          </div>\n          <div className=\"incomingCallButtons flex\">\n            <button\n              name=\"accept\"\n              className=\"alertButtonPrimary\"\n              onClick={() => acceptCall()}\n            >\n              Accept\n            </button>\n            <button\n              name=\"reject\"\n              className=\"alertButtonSecondary\"\n              onClick={() => rejectCall()}\n            >\n              Reject\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <></>\n    );\n  }\n};\n\nexport default IncomingCall;\n","/* eslint-disable */\nexport const isMobileDevice = () => {\n  let check = false;\n  (function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n}\n\nexport const showCopiedMessage = (yourID, setCopied) => {\n  navigator.clipboard.writeText(yourID);\n  setCopied(true);\n  setInterval(() => {\n    setCopied(false);\n  }, 1000);\n}\n","import React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport Rodal from \"rodal\";\nimport { Howl } from \"howler\";\n\nimport \"rodal/lib/rodal.css\";\n\nimport ringtone from \"./Sounds/ringtone.mp3\";\n\nimport ScreenShare from \"./components/ScreenShare\";\nimport FullScreenBtn from \"./components/FullScreen\";\nimport VideoControl from \"./components/VideoControl\";\nimport AudioControl from \"./components/AudioControl\";\nimport HangUp from \"./components/HangUp\";\nimport LandingHTML from \"./components/LandingHTML\";\nimport IncomingCall from \"./components/IncomingCall\";\n\nimport { showCopiedMessage, isMobileDevice } from './utils/tools';\n\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true,\n});\n\n\nfunction App() {\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalMessage, setModalMessage] = useState(\"\");\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n  const [isfullscreen, setFullscreen] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const myPeer = useRef();\n\n  useEffect(() => {\n    socket.current = io.connect(\"/\");\n\n    socket.current.on(\"yourID\", (id) => {\n      setYourID(id);\n    });\n    socket.current.on(\"allUsers\", (users) => {\n      setUsers(users);\n    });\n\n    socket.current.on(\"hey\", (data) => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  function callPeer(id) {\n    if (id !== \"\" && users[id] && id !== yourID) {\n      navigator.mediaDevices\n        .getUserMedia({ video: true, audio: true })\n        .then((stream) => {\n          setStream(stream);\n          setCallingFriend(true);\n          setCaller(id);\n          if (userVideo.current) {\n            userVideo.current.srcObject = stream;\n          }\n          const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            stream: stream,\n          });\n\n          myPeer.current = peer;\n\n          peer.on(\"signal\", (data) => {\n            socket.current.emit(\"callUser\", {\n              userToCall: id,\n              signalData: data,\n              from: yourID,\n            });\n          });\n\n          peer.on(\"stream\", (stream) => {\n            if (partnerVideo.current) {\n              partnerVideo.current.srcObject = stream;\n            }\n          });\n\n          peer.on(\"error\", (err) => {\n            endCall();\n          });\n\n          socket.current.on(\"callAccepted\", (signal) => {\n            setCallAccepted(true);\n            peer.signal(signal);\n          });\n\n          socket.current.on(\"close\", () => {\n            window.location.reload();\n          });\n\n          socket.current.on(\"rejected\", () => {\n            window.location.reload();\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n          setModalMessage(\n            \"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use video call service.\"\n          );\n          setModalVisible(true);\n        });\n    } else {\n      setModalMessage(\n        \"We think the username entered is wrong. Please check again and retry!\"\n      );\n      setModalVisible(true);\n      return;\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        setStream(stream);\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n        setCallAccepted(true);\n        const peer = new Peer({\n          initiator: false,\n          trickle: false,\n          stream: stream,\n        });\n\n        myPeer.current = peer;\n\n        peer.on(\"signal\", (data) => {\n          socket.current.emit(\"acceptCall\", { signal: data, to: caller });\n        });\n\n        peer.on(\"stream\", (stream) => {\n          partnerVideo.current.srcObject = stream;\n        });\n\n        peer.on(\"error\", (err) => {\n          endCall();\n        });\n\n        peer.signal(callerSignal);\n\n        socket.current.on(\"close\", () => {\n          window.location.reload();\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        setModalMessage(\n          \"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use video call service.\"\n        );\n        setModalVisible(true);\n      });\n  }\n\n  function rejectCall() {\n    ringtoneSound.unload();\n    setCallRejected(true);\n    socket.current.emit(\"rejected\", { to: caller });\n    window.location.reload();\n  }\n\n  function endCall() {\n    myPeer.current.destroy();\n    socket.current.emit(\"close\", { to: caller });\n    window.location.reload();\n  }\n\n  function shareScreen() {\n    navigator.mediaDevices\n      .getDisplayMedia({ cursor: true })\n      .then((screenStream) => {\n        myPeer.current.replaceTrack(\n          stream.getVideoTracks()[0],\n          screenStream.getVideoTracks()[0],\n          stream\n        );\n        userVideo.current.srcObject = screenStream;\n        screenStream.getTracks()[0].onended = () => {\n          myPeer.current.replaceTrack(\n            screenStream.getVideoTracks()[0],\n            stream.getVideoTracks()[0],\n            stream\n          );\n          userVideo.current.srcObject = stream;\n        };\n      });\n  }\n\n  function toggleMuteAudio() {\n    if (stream) {\n      setAudioMuted(!audioMuted);\n      stream.getAudioTracks()[0].enabled = audioMuted;\n    }\n  }\n\n  function toggleMuteVideo() {\n    if (stream) {\n      setVideoMuted(!videoMuted);\n      stream.getVideoTracks()[0].enabled = videoMuted;\n    }\n  }\n\n  function renderLanding() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"block\";\n    return \"none\";\n  }\n\n  function renderCall() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"none\";\n    return \"block\";\n  }\n  let UserVideo;\n  if (stream) {\n    UserVideo = (\n      <video className=\"userVideo\" playsInline muted ref={userVideo} autoPlay />\n    );\n  }\n\n  let PartnerVideo;\n  if (callAccepted && isfullscreen) {\n    PartnerVideo = (\n      <video\n        className=\"partnerVideo cover\"\n        playsInline\n        ref={partnerVideo}\n        autoPlay\n      />\n    );\n  } else if (callAccepted && !isfullscreen) {\n    PartnerVideo = (\n      <video className=\"partnerVideo\" playsInline ref={partnerVideo} autoPlay />\n    );\n  }\n\n  return (\n    <>\n      <div style={{ display: renderLanding() }}>\n        <LandingHTML\n          copied={copied}\n          showCopiedMessage={showCopiedMessage}\n          setCopied={setCopied}\n          yourID={yourID}\n          receiverID={receiverID}\n          setReceiverID={setReceiverID}\n          callPeer={callPeer}\n        />\n        <Rodal\n          visible={modalVisible}\n          onClose={() => setModalVisible(false)}\n          width={20}\n          height={5}\n          measure={\"em\"}\n          closeOnEsc={true}\n        >\n          <div>{modalMessage}</div>\n        </Rodal>\n        <IncomingCall\n          receivingCall={receivingCall}\n          callAccepted={callAccepted}\n          callRejected={callRejected}\n          acceptCall={acceptCall}\n          rejectCall={rejectCall}\n          caller={caller}\n        />\n      </div>\n      <div className=\"callContainer\" style={{ display: renderCall() }}>\n        <Suspense fallback={<div>Loading...</div>}></Suspense>\n        <div className=\"partnerVideoContainer\">{PartnerVideo}</div>\n        <div className=\"userVideoContainer\">{UserVideo}</div>\n        <div className=\"controlsContainer flex\">\n          <AudioControl\n            audioMuted={audioMuted}\n            toggleMuteAudio={toggleMuteAudio}\n          />\n          <VideoControl\n            videoMuted={videoMuted}\n            toggleMuteVideo={toggleMuteVideo}\n          />\n          <ScreenShare\n            isMobileDevice={isMobileDevice}\n            shareScreen={shareScreen}\n          />\n          <FullScreenBtn\n            isfullscreen={isfullscreen}\n            setFullscreen={setFullscreen}\n          />\n          <HangUp endCall={endCall} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/ringtone.0be3c651.mp3\";","module.exports = __webpack_public_path__ + \"static/media/share.e7b143c0.svg\";","module.exports = __webpack_public_path__ + \"static/media/fullscreen.8f5e7921.svg\";","module.exports = __webpack_public_path__ + \"static/media/minimize.fff27c21.svg\";","module.exports = __webpack_public_path__ + \"static/media/camera.299a8f67.svg\";","module.exports = __webpack_public_path__ + \"static/media/camera-stop.85f8745d.svg\";","module.exports = __webpack_public_path__ + \"static/media/microphone.a2374838.svg\";","module.exports = __webpack_public_path__ + \"static/media/microphone-stop.09d0b6c2.svg\";","module.exports = __webpack_public_path__ + \"static/media/hang-up.1b1f0dc8.svg\";"],"sourceRoot":""}